--[[
Project: VitaOnline
File: maut-server.lua
Author(s):	Sebihunter
]]--

--[[
>> MAUTSYSTEM <<                                                                                                                                  
]]--

gMautstellen = {
[1] = {x = 1697.0273,y = 451.3894,z = 30.6530, rx=0, ry=90, rz=0},
[2] = {x = 1705.5924,y = 448.2912,z = 30.6360, rx=0, ry=90, rz=0},
[3] = {x = 1715.8848,y = 439.7421,z = 30.6973, rx=0, ry=-90, rz=0},
[4] = {x = 1723.1915,y = 436.8748,z = 30.7022, rx=0, ry=-90, rz=0},
[5] = {x = -1139.4895,y = 1116.5160,z = 38.0668, rx=0, ry=90, rz=0},
[6] = {x = -1135.2020,y = 1111.9369,z = 38.0771, rx=0, ry=90, rz=0},
[7] = {x = -1134.4844,y = 1098.6001,z = 37.7305, rx=0, ry=90, rz=0},
[8] = {x = -1130.4749,y = 1094.1304,z = 37.7437, rx=0, ry=90, rz=0},
[9] = {x = 39.6419,y = -1522.2268,z = 4.9068, rx=0, ry=-90, rz=0},
[10] = {x = 29.4282,y = -1534.1650,z = 4.8963, rx=0, ry=90, rz=0},
[11] = {x = 511.10000610352,y = 494.10000610352,z = 18.89999961853, rx=0, ry=-90, rz=0},
[12] = {x = 502.10000610352,y = 494.10000610352,z = 18.89999961853, rx=0, ry=-90, rz=0},
[13] = {x = -163.30000305176,y = 400.20001220703,z = 12.10000038147, rx=0, ry=-90, rz=0},
[14] = {x = -158.5,y = 394.70001220703,z = 12.10000038147, rx=0, ry=-90, rz=0},
[15] = {x = -12.800000190735,y = -1366.4000244141,z = 10.89999961853, rx=0, ry=-90, rz=0},
[16] = {x = -25.39999961853,y = -1340.8000488281,z = 10.89999961853, rx=0, ry=-90, rz=0},
[17] = {x = -92.400001525879,y = -936,z = 20.10000038147, rx=0, ry=-90, rz=0},
[18] = {x = -95.599998474121,y = -928.29998779297,z = 19.5, rx=0, ry=-90, rz=0},
[19] = {x = -963.5,y = -338.2999877929,z = 36.200000762939, rx=0, ry=-90, rz=0},
[20] = {x = -969.29998779297,y = -331.5,z = 36.400000762939, rx=0, ry=-90, rz=0},
[21] = {x = -2695.3000488281,y = 1278,z = 55.400001525879, rx=0, ry=-90, rz=0},
[22] = {x = -2668,y = 1271.3000488281,z = 55.400001525879, rx=0, ry=-90, rz=0}

}

--Mautschranken - LS nach LV
gMautstellen[1].object = createObject(968, 1692.538, 449.742, 31.0, 0.0, -91.960, -202.500)
gMautstellen[2].object = createObject(968, 1707.518, 443.729, 31.0, 0.0, -91.960, -22.500)
gMautstellen[3].object = createObject(968, 1712.996, 444.077, 31.0, 0.0, 90.241, -22.500)
gMautstellen[4].object = createObject(968, 1721.245, 441.204, 31.0, 0.0, 90.241, -22.500)

--Mautschranken - LV nach SF
gMautstellen[5].object = createObject(968, -1145.287719, 1116.377319, 38.145870, 1.000000, -91.000000, -223.000000) --schranke1
gMautstellen[6].object = createObject(968, -1135.021606, 1106.797363, 38.211486, 0.000000, -91.499977, -43.000030) --schranke 2
gMautstellen[7].object = createObject(968, -1134.564819, 1104.493774, 37.948299, 0.000000, -90.000000, 137.000061) --schranke3
gMautstellen[8].object = createObject(968, -1124.123046, 1094.764770, 38.195407, 0.000000, -92.000000, -43.000000) --schranke 4
 
--Mautschranken - LS nach SF
gMautstellen[9].object = createObject(968, 35.326698, -1518.097534, 5.111024, -2.000000, 90.899986, -91.000000) --schranke3
gMautstellen[10].object = createObject(968, 35.139465, -1532.414672, 5.024323, 0.000000, -90.799987, 89.000015) --schranke 4

--Brücke 1 SF/LV
gMautstellen[11].object = createObject ( 968, 506.79998779297, 492.60000610352, 18.700000762939, 0, 90, 36.248992919922 )
gMautstellen[12].object = createObject ( 968, 506.60000610352, 492.5, 18.700000762939, 0, 90, 216.49401855469 )

--Brücke 2 SF/LV
gMautstellen[13].object = createObject ( 968, -160.39999389648, 396.70001220703, 11.89999961853, 0, 90, 166.74633789063 )
gMautstellen[14].object = createObject ( 968, -160, 396.5, 11.89999961853, 0, 90, 346.99890136719 )

--Autobahn SF/LS
gMautstellen[15].object = createObject ( 968, -12.10000038147, -1362, 11.10000038147, 0, 90, 308.74835205078 )
gMautstellen[16].object = createObject ( 968, -30.10000038147, -1340, 11.10000038147, 0, 90, 308.74328613281 )

--Brücke 3 SF/LS
gMautstellen[17].object = createObject ( 968, -94, -930.29998779297, 19.200000762939, 0, 91.000183105469, 335.24926757813 )
gMautstellen[18].object = createObject ( 968, -93.800003051758, -930.90002441406, 19.200000762939, 359.99890136719, 90.250213623047, 153.99749755859 )

--Brücke 4 SF/LS
gMautstellen[19].object = createObject ( 968, -959.20001220703, -336.39999389648, 36, 0, 89.749755859375, 164.74951171875 )
gMautstellen[20].object = createObject ( 968, -973, -333.60000610352, 36.299999237061, 0, 90, 348.74945068359 )

--Golden Gate
gMautstellen[21].object = createObject ( 968, -2699.3000488281, 1274.3000488281, 55.099998474121, 0, 90, 0 )
gMautstellen[22].object = createObject ( 968, -2663.6000976563, 1275.3000488281, 55.099998474121, 0, 90, 180 )

createInvinciblePed(287, 35.875, -1526.5712890625, 5.4368996620178, 353.88327026367 )
createInvinciblePed(287, 35.6552734375, -1531.2021484375, 5.4389419555664, 169.03546142578 )

createInvinciblePed(287, 1700.42578125, 447.4267578125, 30.942506790161, 73.996795654297  )
createInvinciblePed(287, 1708.6748046875, 444.482421875, 30.919509887695, 90.916015625  )
createInvinciblePed(287, 1713.0556640625, 442.6337890625, 30.928014755249, 248.52827453613  )
createInvinciblePed(287, 1720.431640625, 440.0693359375, 30.947988510132, 247.90203857422  )

createObject ( 966, 506.5, 492.39999389648, 17.89999961853, 0, 0, 36 )
createObject ( 966, 506.89999389648, 492.70001220703, 17.89999961853, 0, 0, 216 )
createObject ( 966, -160.5, 396.70001220703, 11.10000038147, 0, 0, 346.25 )
createObject ( 966, -160, 396.5, 11.10000038147, 0, 0, 166.5 )
createObject ( 966, -12.10000038147, -1362, 10.199999809265, 0, 0, 128 )
createObject ( 966, -30, -1340, 10.199999809265, 0, 0, 127.99621582031 )
createObject ( 973, -9.3999996185303, -1371.6999511719, 10.800000190735, 0, 0, 66 )
createObject ( 973, -20.799999237061, -1344.9000244141, 10.699999809265, 0, 0, 6.744873046875 )
createObject ( 966, -94, -930.79998779297, 18.299999237061, 0, 0, 334 )
createObject ( 966, -93.800003051758, -930.40002441406, 18.299999237061, 8, 0, 154.49536132813 )
createObject ( 966, -972.79998779297, -333.60000610352, 35.400001525879, 0, 0, 168.75 )
createObject ( 966, -959.5, -336.39999389648, 35, 0, 2, 343.99645996094 )
createObject ( 973, -958.90002441406, -341.70001220703, 36.099998474121, 0, 0, 102.50012207031 )
createObject ( 973, -974.09997558594, -328.79998779297, 36.400001525879, 0, 0, 283.9970703125 )
createObject ( 966, -2663.8000488281, 1275.3000488281, 54.299999237061 )
createObject ( 966, -2699.1999511719, 1274.3000488281, 54.299999237061, 0, 0, 180 )
createObject ( 3578, -2672.8999023438, 1258.5999755859, 55.200000762939, 0, 0, 92 )
createObject ( 3578, -2672.6000976563, 1248, 55.200000762939, 0, 0, 91.99951171875 )
createObject ( 3578, -2673.8999023438, 1237.8000488281, 55.200000762939, 0, 0, 72.24951171875 )
createObject ( 3578, -2673.3000488281, 1291.4000244141, 55.200000762939, 0, 0, 270.24438476563 )
createObject ( 3578, -2676.5, 1301.5, 55.200000762939, 0, 0, 310.49169921875 )
createObject ( 3578, -2690.1999511719, 1291.5999755859, 55.200000762939, 0, 0, 270.49011230469 )
createObject ( 3578, -2686.8999023438, 1301.4000244141, 55.200000762939, 0, 0, 230.98889160156 )
createObject ( 3578, -2689.1999511719, 1258.0999755859, 55.200000762939, 0, 0, 95.99951171875 )
createObject ( 3578, -2687.8000488281, 1246.9000244141, 55.200000762939, 0, 0, 97.74853515625 )
createObject ( 3578, -2684, 1236.3000488281, 55.200000762939, 0, 0, 124.49533081055 )
createObject ( 1228, -2679.1999511719, 1232.1999511719, 54.799999237061, 0, 0, 282 )
createObject ( 1228, -2677.1999511719, 1232.6999511719, 54.799999237061, 0, 0, 284.7470703125 )
createObject ( 1228, -2681.8000488281, 1305.5999755859, 54.900001525879, 0, 0, 271.75 )



createObject(978,-1405.634,827.703,47.271,0.0,0.0,0.0);
createObject(979,-1398.570,820.785,47.295,0.0,0.0,-94.538);
createObject(978,-1426.197,791.133,46.924,0.0,0.0,-172.747);
createObject(979,-1433.041,797.915,46.911,0.0,0.0,-272.441);
createObject(973,-1402.390,812.024,47.198,0.0,0.0,-133.213);
createObject(973,-1413.452,823.552,47.203,0.0,0.0,47.269);
createObject(973,-1429.157,806.726,47.017,0.0,0.0,46.410);
createObject(973,-1418.260,795.884,47.025,0.0,0.0,-134.932);
createObject(5837,-1411.184,805.056,47.989,0.0,0.0,45.550);
createObject(5837,-1420.460,812.699,47.970,0.0,0.0,-133.213);

createObject(966, -1124.267822, 1094.912597, 37.197795, 0.000000, 0.000000, -43.000000); --schrankstütze
createObject(967, -1121.976928, 1092.059326, 37.592277, 0.000000, 0.000000, 47.000000); --schrankenhaus
createObject(966, -1134.416503, 1104.376098, 37.197795, 0.000000, 0.000000, -223.000000); --schrankstütze
createObject(967, -1134.809570, 1105.429931, 37.592674, 0.000000, 0.000000, -133.000000); --schrankenhaus
createObject(967, -1134.809570, 1105.429931, 37.592674, 0.000000, 0.000000, -313.000000); --schrankenhaus
createObject(966, -1135.148437, 1106.932006, 37.197795, 0.000000, 0.000000, -403.000000); --schrankstütze
createObject(966, -1145.155639, 1116.231079, 37.197795, 0.000000, 0.000000, -583.000000); --schrankstütze
createObject(967, -1149.268066, 1117.616088, 37.453014, 0.000000, 0.000000, -313.000000); --schrankenhaus
createObject(967, -1122.622314, 1094.558837, 37.292285, 0.000000, 0.000000, 407.299896); --schrankenhaus
createObject(967, -1146.492065, 1117.365234, 37.220020, 0.000000, 0.000000, 46.000000); --schrankenhaus


setTimer(function()
	for maut = 1, #gMautstellen do
		local hasBeenUsed = false
		local players = getElementsByType("player")
		for numb,ply in ipairs(getElementsByType("player")) do
			local x, y, z = getElementPosition(ply)
			if getDistanceBetweenPoints3D ( x, y, z, gMautstellen[maut].x, gMautstellen[maut].y, gMautstellen[maut].z) < 4 and getPedOccupiedVehicleSeat ( ply ) == 0 then
				if getElementData(gMautstellen[maut].object, "opened") == false then
					if getPlayerMoneyEx(ply) >= 10 then
						setElementData(gMautstellen[maut].object, "opened", true)
						local x1, y1, z1 = getElementPosition(gMautstellen[maut].object)
						takePlayerMoneyEx(ply, 10)
						local firmenkonto = getBankAccount("SASO")
						systemDeposit(firmenkonto, 10, "Maut")
						outputChatBox("Mautkosten: 10 Vero - Noch eine gute Fahrt!", ply, 50,50,50)
						moveObject(gMautstellen[maut].object, 1000, x1, y1, z1, gMautstellen[maut].rx, gMautstellen[maut].ry, gMautstellen[maut].rz, "InOutQuad")	
					end
					setTimer(function(mauts) 
						local x1, y1, z1 = getElementPosition(mauts.object)
						moveObject(mauts.object, 1000, x1, y1, z1, -mauts.rx, -mauts.ry, -mauts.rz, "InOutQuad")
						setTimer(function(mauts) setElementData(mauts.object, "opened", false) end, 1000, 1, mauts)
					end, 5000, 1, gMautstellen[maut])
				end
			end
		end
	end
end, 1000, 0)

--Mautstelle von LS nach LV Häuser
createObject(967, 1708.722, 444.346, 29.933, 0.0, 0.0, 67.500)
createObject(966, 1707.436, 443.764, 29.927, 0.0, 0.0, -22.500)
createObject(966, 1692.505, 449.777, 30.073, 0.0, 0.0, 157.500)
createObject(967, 1700.475, 447.397, 29.941, 0.0, 0.0, 67.500)


createObject(967, 1713.027, 442.837, 29.911, 0.0, 0.0, -112.500)
createObject(966, 1712.990, 444.030, 29.949, 0.0, 0.0, -202.500)
createObject(967, 1720.181, 440.237, 29.919, 0.0, 0.0, -112.500)
createObject(966, 1721.208, 441.131, 29.932, 0.0, 0.0, -202.500)


createObject(966, 35.317485, -1518.301513, 4.230957, 0.000000, 0.000000, 89.000000) --abstell
createObject(967, 35.844612, -1526.678100, 4.447521, 0.000000, 0.000000, -2.500000) --haus
createObject(967, 35.773677, -1528.175292, 4.447921, 0.000000, 0.000000, -2.100000) --haus
createObject(967, 35.731403, -1529.657958, 4.442766, 0.000000, 0.000000, 178.000000) --haus
createObject(967, 35.676078, -1531.156494, 4.446968, 0.000000, 0.000000, -182.000000) --haus
createObject(966, 35.147022, -1532.617065, 4.233961, 0.000000, 0.000000, 88.799987) --abstell
createObject(967, 35.459140, -1540.797485, 4.258389, 0.000000, 0.000000, -180.000000) --haus

createObject(657, -88.7771, 1351.8239, 9.5876, 0.0000, 0.0000, 0.0000)
createObject(657, -88.7885, 1351.8151, 8.8074, 0.0000, 0.0000, 0.0000)
createObject(954, -88.3727, 1353.2234, 14.8358, 0.0000, 0.0000, 0.0000)
createObject(954, -87.2476, 1352.2236, 16.2222, 0.0000, 0.0000, 282.6507)
createObject(954, -89.2227, 1349.5153, 13.8256, 0.0000, 0.0000, 192.4098)
createObject(954, -90.6907, 1351.7839, 12.7333, 0.0000, 0.0000, 248.2732)
createObject(1240, -91.0158, 1351.5846, 13.9328, 0.0000, 0.0000, 0.0000)
createObject(1240, -86.2475, 1352.1862, 14.2224, 0.0000, 0.0000, 0.0000)
createObject(1240, -87.7953, 1350.0864, 15.9830, 0.0000, 0.0000, 0.0000)
createObject(1247, -87.5469, 1352.8425, 13.0592, 0.0000, 0.0000, 312.7310)
createObject(1247, -90.6907, 1352.4945, 15.2368, 0.0000, 0.0000, 51.5662)
createObject(1247, -89.8656, 1350.9911, 16.5433, 0.0000, 0.0000, 141.8071)
createObject(1274, -90.6527, 1350.2631, 13.8668, 0.0000, 0.0000, 0.0000)
createObject(1274, -86.6726, 1350.8657, 14.5292, 0.0000, 0.0000, 0.0000)
createObject(1247, -88.7793, 1351.7430, 18.9980, 0.0000, 0.0000, 141.8071)
createObject(1985, -88.7467, 1350.4501, 12.4182, 0.0000, 0.0000, 0.0000)
createObject(1985, -88.9656, 1351.5631, 18.0331, 0.0000, 40.3935, 0.0000)
createObject(3267, -83.4997, 1347.3903, 9.2424, 0.0000, 0.0000, 270.0000)
createObject(3267, -84.7957, 1357.0898, 8.9483, 0.0000, 0.0000, 281.2500)
createObject(1437, -86.9774, 1349.2386, 10.6427, 346.2490, 0.0000, 36.4056)
createObject(3277, -82.3020, 1352.6321, 10.3399, 0.0000, 0.0000, 90.0000)
createObject(2663, -87.6726, 1351.7203, 17.1298, 0.0000, 0.0000, 66.1766)
createObject(2663, -89.6907, 1353.2023, 14.9640, 0.0000, 0.0000, 27.5020)
createObject(2710, -88.5727, 1352.0730, 18.7412, 0.0000, 0.0000, 0.0000)
createObject(2690, -85.3419, 1352.3003, 9.8522, 0.0000, 0.0000, 292.5000)
createObject(2690, -85.4783, 1352.6725, 9.5003, 85.9436, 2.5783, 332.0340)
createObject(2228, -89.0422, 1351.7736, 9.8747, 18.0482, 0.0000, 90.0001)
createObject(854, -90.9472, 1351.1658, 9.5589, 0.0000, 0.0000, 0.0000)
createObject(854, -91.0272, 1351.7302, 9.5335, 0.0000, 0.0000, 0.0000)
createObject(854, -91.7133, 1351.3102, 9.5336, 0.0000, 0.0000, 0.0000)
createObject(916, -88.7078, 1351.7665, 9.7556, 0.0000, 0.0000, 0.0000)
createObject(2840, -92.1917, 1352.5560, 9.2792, 0.0000, 0.0000, 0.0000)
createObject(2840, -93.3137, 1351.7090, 9.2096, 0.0000, 3.4377, 288.6668)
createObject(1231, -88.6683, 1351.7020, 11.4077, 0.0000, 0.0000, 0.0000)
createObject(1231, -88.6647, 1351.6399, 14.0220, 0.0000, 0.0000, 0.0000)
createObject(1598, -88.5550, 1351.2815, 17.3383, 0.0000, 0.0000, 0.0000)
createObject(3504, -91.9979, 1365.5813, 10.6158, 0.0000, 0.0000, 191.2500)
createObject(3504, -90.6937, 1365.8317, 10.6158, 0.0000, 0.0000, 191.2500)
createObject(3504, -89.2424, 1365.9960, 10.6158, 0.0000, 0.0000, 191.2500)
createObject(3504, -87.7689, 1366.2086, 10.6158, 0.0000, 0.0000, 191.2500)
